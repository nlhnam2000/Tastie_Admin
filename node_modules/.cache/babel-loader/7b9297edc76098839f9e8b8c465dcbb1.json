{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/Tastie_Admin/src/views/utilities/EcouponList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { styled } from '@mui/material/styles';\nimport { Card, Dialog, DialogActions, DialogContentText, DialogTitle, DialogContent, Button } from '@mui/material';\nimport { DataGrid } from '@mui/x-data-grid'; // project imports\n\nimport MainCard from 'ui-component/cards/MainCard';\nimport SecondaryAction from 'ui-component/cards/CardSecondaryAction';\nimport { ecouponColumns } from 'assets/columns/gridData';\nimport { HOST_NAME } from 'config';\nimport { CONNECT_SOCKET, DISCONNECT_SOCKET } from 'store/actions'; // assets\n\nimport LinkIcon from '@mui/icons-material/Link'; // libraries\n\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux'; // styles\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IFrameWrapper = styled('iframe')(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    height: 'calc(100vh - 210px)',\n    border: '1px solid',\n    borderColor: theme.palette.primary.light\n  };\n}); // =============================|| TABLER ICONS ||============================= //\n\nconst EcouponList = () => {\n  _s();\n\n  const [rows, setRows] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [formData, setFormData] = useState({});\n  const dispatch = useDispatch();\n  const customization = useSelector(state => state.customization);\n  useEffect(() => {\n    dispatch({\n      type: CONNECT_SOCKET\n    });\n    return () => {\n      dispatch({\n        type: DISCONNECT_SOCKET\n      });\n    };\n  }, []);\n\n  const formatDate = date => {\n    const d = new Date(date);\n    let month = (d.getMonth() + 1).toString();\n    let day = d.getDate().toString();\n    const year = d.getFullYear();\n    if (month.length < 2) month = `0${month}`;\n    if (day.length < 2) day = `0${day}`;\n    return [year, month, day].join('-'); // 2022-05-04\n  }; // const socket = io(`http://${HOST_NAME}:3015`);\n\n\n  const GetAllEcoupon = async (offset, limit) => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const res = await axios.post(`http://${HOST_NAME}:3010/v1/api/tastie/admin/get-all-ecoupon`, {\n        limit,\n        offset\n      }, config);\n\n      if (res.data.status) {\n        const clone = [...res.data.response];\n        setRows(clone.map(item => ({ ...item,\n          // update_at: new Date(item.update_at).toLocaleString('vi-VI'),\n          // start_date: new Date(item.start_date).toLocaleString('vi-VI'),\n          // expire_date: new Date(item.expire_date).toLocaleString('vi-VI')\n          update_at: formatDate(item.update_at),\n          start_date: formatDate(item.start_date),\n          expire_date: formatDate(item.expire_date)\n        })));\n      }\n    } catch (error) {\n      console.error('Cannot get all ecoupons', error);\n    }\n  };\n\n  const handleUpdateRow = async formData => {\n    try {\n      const res = await axios.post(`http://${HOST_NAME}:3010/v1/api/tastie/admin/update-ecoupon`, formData);\n\n      if (res.data.status) {\n        await GetAllEcoupon(1, 50);\n      }\n    } catch (error) {\n      console.error('Cannot update ecoupon', error);\n    } finally {\n      setOpenModal(false);\n    }\n  };\n\n  useEffect(() => {\n    // socket.emit('admin', 'hello from admin');\n    GetAllEcoupon(1, 50);\n  }, []);\n  useEffect(() => {\n    console.log(formData);\n  }, [formData]);\n  return /*#__PURE__*/_jsxDEV(MainCard, {\n    title: \"Ecoupon List\",\n    secondary: /*#__PURE__*/_jsxDEV(SecondaryAction, {\n      icon: /*#__PURE__*/_jsxDEV(LinkIcon, {\n        fontSize: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 74\n      }, this),\n      link: \"https://tablericons.com/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 51\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(DataGrid, {\n      rows: rows,\n      columns: ecouponColumns,\n      pageSize: 50 // rowsPerPageOptions={[40]}\n      ,\n      checkboxSelection: true,\n      disableSelectionOnClick: true,\n      getRowId: row => row.ecoupon_id,\n      sx: {\n        width: '100%',\n        height: '70vh'\n      } // onPageChange={(page) => alert(page)}\n      ,\n      onCellEditCommit: event => {\n        const rowEdited = rows.find(row => row.ecoupon_id === event.id);\n        setFormData(prev => ({ ...prev,\n          ...rowEdited,\n          start_date: formatDate(rowEdited.start_date),\n          expire_date: formatDate(rowEdited.expire_date),\n          update_at: formatDate(rowEdited.update_at),\n          [event.field]: event.value\n        }));\n        setOpenModal(true); // const formData = {\n        //     ...rowEdited,\n        //     [event.field]: event.value\n        // };\n        // console.log(formData);\n        // handleUpdateRow(formData);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openModal,\n        onClose: () => setOpenModal(false),\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          id: \"alert-dialog-title\",\n          children: \"Are you sure to apply the changes ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n            id: \"alert-dialog-description\",\n            children: \"This action will change the original record. Would you like to apply change ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setOpenModal(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => handleUpdateRow(formData),\n            autoFocus: true,\n            children: \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EcouponList, \"O4g7tO87/EjScKFj+FceDkXAOwE=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = EcouponList;\nexport default EcouponList;\n\nvar _c;\n\n$RefreshReg$(_c, \"EcouponList\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/Tastie_Admin/src/views/utilities/EcouponList.js"],"names":["React","useEffect","useState","styled","Card","Dialog","DialogActions","DialogContentText","DialogTitle","DialogContent","Button","DataGrid","MainCard","SecondaryAction","ecouponColumns","HOST_NAME","CONNECT_SOCKET","DISCONNECT_SOCKET","LinkIcon","axios","useDispatch","useSelector","IFrameWrapper","theme","height","border","borderColor","palette","primary","light","EcouponList","rows","setRows","openModal","setOpenModal","formData","setFormData","dispatch","customization","state","type","formatDate","date","d","Date","month","getMonth","toString","day","getDate","year","getFullYear","length","join","GetAllEcoupon","offset","limit","config","headers","res","post","data","status","clone","response","map","item","update_at","start_date","expire_date","error","console","handleUpdateRow","log","row","ecoupon_id","width","event","rowEdited","find","id","prev","field","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { styled } from '@mui/material/styles';\r\nimport { Card, Dialog, DialogActions, DialogContentText, DialogTitle, DialogContent, Button } from '@mui/material';\r\nimport { DataGrid } from '@mui/x-data-grid';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport SecondaryAction from 'ui-component/cards/CardSecondaryAction';\r\nimport { ecouponColumns } from 'assets/columns/gridData';\r\nimport { HOST_NAME } from 'config';\r\nimport { CONNECT_SOCKET, DISCONNECT_SOCKET } from 'store/actions';\r\n\r\n// assets\r\nimport LinkIcon from '@mui/icons-material/Link';\r\n\r\n// libraries\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// styles\r\nconst IFrameWrapper = styled('iframe')(({ theme }) => ({\r\n    height: 'calc(100vh - 210px)',\r\n    border: '1px solid',\r\n    borderColor: theme.palette.primary.light\r\n}));\r\n\r\n// =============================|| TABLER ICONS ||============================= //\r\n\r\nconst EcouponList = () => {\r\n    const [rows, setRows] = useState([]);\r\n    const [openModal, setOpenModal] = useState(false);\r\n    const [formData, setFormData] = useState({});\r\n    const dispatch = useDispatch();\r\n    const customization = useSelector((state) => state.customization);\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: CONNECT_SOCKET });\r\n\r\n        return () => {\r\n            dispatch({ type: DISCONNECT_SOCKET });\r\n        };\r\n    }, []);\r\n\r\n    const formatDate = (date) => {\r\n        const d = new Date(date);\r\n        let month = (d.getMonth() + 1).toString();\r\n        let day = d.getDate().toString();\r\n        const year = d.getFullYear();\r\n\r\n        if (month.length < 2) month = `0${month}`;\r\n        if (day.length < 2) day = `0${day}`;\r\n\r\n        return [year, month, day].join('-'); // 2022-05-04\r\n    };\r\n\r\n    // const socket = io(`http://${HOST_NAME}:3015`);\r\n\r\n    const GetAllEcoupon = async (offset, limit) => {\r\n        try {\r\n            const config = {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            };\r\n            const res = await axios.post(\r\n                `http://${HOST_NAME}:3010/v1/api/tastie/admin/get-all-ecoupon`,\r\n                {\r\n                    limit,\r\n                    offset\r\n                },\r\n                config\r\n            );\r\n\r\n            if (res.data.status) {\r\n                const clone = [...res.data.response];\r\n                setRows(\r\n                    clone.map((item) => ({\r\n                        ...item,\r\n                        // update_at: new Date(item.update_at).toLocaleString('vi-VI'),\r\n                        // start_date: new Date(item.start_date).toLocaleString('vi-VI'),\r\n                        // expire_date: new Date(item.expire_date).toLocaleString('vi-VI')\r\n                        update_at: formatDate(item.update_at),\r\n                        start_date: formatDate(item.start_date),\r\n                        expire_date: formatDate(item.expire_date)\r\n                    }))\r\n                );\r\n            }\r\n        } catch (error) {\r\n            console.error('Cannot get all ecoupons', error);\r\n        }\r\n    };\r\n\r\n    const handleUpdateRow = async (formData) => {\r\n        try {\r\n            const res = await axios.post(`http://${HOST_NAME}:3010/v1/api/tastie/admin/update-ecoupon`, formData);\r\n            if (res.data.status) {\r\n                await GetAllEcoupon(1, 50);\r\n            }\r\n        } catch (error) {\r\n            console.error('Cannot update ecoupon', error);\r\n        } finally {\r\n            setOpenModal(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // socket.emit('admin', 'hello from admin');\r\n        GetAllEcoupon(1, 50);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        console.log(formData);\r\n    }, [formData]);\r\n\r\n    return (\r\n        <MainCard title=\"Ecoupon List\" secondary={<SecondaryAction icon={<LinkIcon fontSize=\"small\" />} link=\"https://tablericons.com/\" />}>\r\n            {/* <Card sx={{ overflow: 'hidden' }}>\r\n            <IFrameWrapper title=\"Tabler Icons\" width=\"100%\" src=\"https://tablericons.com/\" />\r\n        </Card> */}\r\n            <DataGrid\r\n                rows={rows}\r\n                columns={ecouponColumns}\r\n                pageSize={50}\r\n                // rowsPerPageOptions={[40]}\r\n                checkboxSelection\r\n                disableSelectionOnClick\r\n                getRowId={(row) => row.ecoupon_id}\r\n                sx={{ width: '100%', height: '70vh' }}\r\n                // onPageChange={(page) => alert(page)}\r\n                onCellEditCommit={(event) => {\r\n                    const rowEdited = rows.find((row) => row.ecoupon_id === event.id);\r\n                    setFormData((prev) => ({\r\n                        ...prev,\r\n                        ...rowEdited,\r\n                        start_date: formatDate(rowEdited.start_date),\r\n                        expire_date: formatDate(rowEdited.expire_date),\r\n                        update_at: formatDate(rowEdited.update_at),\r\n                        [event.field]: event.value\r\n                    }));\r\n                    setOpenModal(true);\r\n                    // const formData = {\r\n                    //     ...rowEdited,\r\n                    //     [event.field]: event.value\r\n                    // };\r\n                    // console.log(formData);\r\n                    // handleUpdateRow(formData);\r\n                }}\r\n            />\r\n            <div>\r\n                <Dialog\r\n                    open={openModal}\r\n                    onClose={() => setOpenModal(false)}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">Are you sure to apply the changes ?</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            This action will change the original record. Would you like to apply change ?\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={() => setOpenModal(false)}>Cancel</Button>\r\n                        <Button onClick={() => handleUpdateRow(formData)} autoFocus>\r\n                            Apply\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        </MainCard>\r\n    );\r\n};\r\n\r\nexport default EcouponList;\r\n"]},"metadata":{},"sourceType":"module"}